import{r as P,bf as Fe,ax as ze,av as He,w as xe,bg as We,bh as Ge,d as ae,bi as we,o as t,m as v,k as d,G as E,h as C,f as e,bj as se,t as j,p as D,v as z,a5 as Je,a7 as ee,F as U,n as A,a2 as ce,a6 as Ke,a as T,i as m,j as k,W as $e,_ as fe,bk as Qe,a9 as Xe,ar as Ye,at as pe,a8 as Ze,aw as et,e as tt,ab as Se,l as X,I as le,aq as ot,U as nt,A as Te,bl as st,bm as lt,af as at,S as rt,bn as it,al as ut}from"./entry.3dd66f35.js";import{_ as dt}from"./NNavbar.vue.d9a029e0.js";import{_ as Ve}from"./NBadge.e849763e.js";import{_ as Re}from"./NSelect.vue.e7f8c81a.js";import{_ as pt}from"./NCheckbox.vue.cf7e1e9d.js";import{u as Ue,_ as ct}from"./storage-options.2224e06b.js";import{_ as ft}from"./DataSchemaButton.vue.b30dcd6f.js";import{_ as mt}from"./NCodeBlock.vue.882d562f.js";import{C as ke,S as Ne}from"./constants.2cc6e981.js";import{U as vt}from"./json-editor-vue.465dc720.js";import{_ as ht}from"./NSectionBlock.7f41e147.js";import{_ as yt}from"./NDrawer.vue.a4010d93.js";import"./client.253674ec.js";import"./NIconTitle.vue.71113a3f.js";const ne=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function _t(r,y){if(typeof r!="string")throw new TypeError("argument str must be a string");const h={},w=(y||{}).decode||kt;let g=0;for(;g<r.length;){const c=r.indexOf("=",g);if(c===-1)break;let s=r.indexOf(";",g);if(s===-1)s=r.length;else if(s<c){g=r.lastIndexOf(";",c-1)+1;continue}const i=r.slice(g,c).trim();if(h[i]===void 0){let a=r.slice(c+1,s).trim();a.codePointAt(0)===34&&(a=a.slice(1,-1)),h[i]=bt(a,w)}g=s+1}return h}function Ce(r,y,h){const o=h||{},w=o.encode||Ct;if(typeof w!="function")throw new TypeError("option encode is invalid");if(!ne.test(r))throw new TypeError("argument name is invalid");const g=w(y);if(g&&!ne.test(g))throw new TypeError("argument val is invalid");let c=r+"="+g;if(o.maxAge!==void 0&&o.maxAge!==null){const s=o.maxAge-0;if(Number.isNaN(s)||!Number.isFinite(s))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(s)}if(o.domain){if(!ne.test(o.domain))throw new TypeError("option domain is invalid");c+="; Domain="+o.domain}if(o.path){if(!ne.test(o.path))throw new TypeError("option path is invalid");c+="; Path="+o.path}if(o.expires){if(!gt(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");c+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(c+="; HttpOnly"),o.secure&&(c+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return c}function gt(r){return Object.prototype.toString.call(r)==="[object Date]"||r instanceof Date}function bt(r,y){try{return y(r)}catch{return r}}function kt(r){return r.includes("%")?decodeURIComponent(r):r}function Ct(r){return encodeURIComponent(r)}const xt={path:"/",watch:!0,decode:r=>We(decodeURIComponent(r)),encode:r=>encodeURIComponent(typeof r=="string"?r:JSON.stringify(r))};function wt(r,y){const h={...xt,...y},o=$t(h)||{},w=P(o[r]??h.default?.());{const g=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${r}`);Fe()&&ze(()=>{g?.close()});const c=()=>{Tt(r,w.value,h),g?.postMessage(Ge(w.value))};let s=!1;g&&(g.onmessage=i=>{s=!0,w.value=i.data,He(()=>{s=!1})}),h.watch?xe(w,()=>{s||c()},{deep:h.watch!=="shallow"}):c()}return w}function $t(r={}){return _t(document.cookie,r)}function St(r,y,h={}){return y==null?Ce(r,y,{...h,maxAge:-1}):Ce(r,y,h)}function Tt(r,y,h={}){document.cookie=St(r,y,h)}const Vt=d("div",{"x-divider":""},null,-1),Ie=ae({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(r){const y=P(!0),h=we();return(o,w)=>{const g=ce,c=Ve,s=Ie;return t(),v("div",null,[d("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:E([{"bg-active":e(h)===o.item.filepath}]),style:Je({paddingLeft:`calc(0.5rem + ${o.index*1.5}em)`}),onClick:w[0]||(w[0]=i=>{y.value=!e(y),h.value=o.item.filepath})},[d("div",{class:E({"w-12":!o.item.routes}),"flex-none":"","text-left":""},[o.item.type==="collection"?(t(),C(g,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(y)?90:0,transition:""},null,8,["transform-rotate"])):(t(),C(c,{key:1,class:E(("getRequestMethodClass"in o?o.getRequestMethodClass:e(se))(o.item.method||"*")),textContent:j((o.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),d("span",{class:E({"flex items-center":o.item.routes}),"text-sm":"","font-mono":""},[o.item.type==="collection"?(t(),C(g,{key:0,title:`${o.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):D("",!0),z(" "+j(o.item.route),1)],2)],6),Vt,e(y)?ee(o.$slots,"default",{key:0},()=>[(t(!0),v(U,null,A(o.item.routes,i=>(t(),C(s,{key:i.filepath,item:i,index:o.index+1},null,8,["item","index"]))),128))]):D("",!0)])}}}),Rt={p4:"",flex:"~ col gap-4"},Ut={key:1,ml2:"",flex:""},Nt=["value"],It={key:0,flex:"","gap-4":""},Dt=d("div",{"flex-auto":""},null,-1),De=ae({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(r,{emit:y}){const h=r,o=Ke(h,"modelValue",y,{passive:!0}),w=T(()=>[...h.keys,"key","value","type"]),g=T(()=>{const i={};for(const a of w.value)i[a]=h.default[a]||"";return i}),c=["string","number","boolean","file","date","time","datetime-local"];function s(i,a){const R=a.target;if(R.files&&R.files[0]){const H=R.files[0],F=new FileReader;F.readAsDataURL(H),F.onload=()=>{o.value[i].value=F.result}}}return xe(()=>o,i=>{i.value.forEach(a=>{if(a.type==="number"&&typeof a.value!="number"){const R=Number.parseFloat(a.value);a.value=Number.isNaN(R)?0:R}else a.type==="boolean"&&typeof a.value!="boolean"?a.value=!0:a.type==="file"&&typeof a.value!="object"?a.value="":a.type==="date"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}$/)?a.value=new Date().toISOString().slice(0,10):a.type==="time"&&typeof a.value=="string"&&!a.value.match(/^\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(11,16):a.type==="datetime-local"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(0,16):a.type==="string"&&(a.value=a.value.toString())})},{deep:!0,immediate:!0,flush:"sync"}),(i,a)=>{const R=$e,H=pt,F=Re,J=ce,b=fe;return t(),v("div",Rt,[(t(!0),v(U,null,A(e(o),(u,S)=>(t(),v("div",{key:S,flex:"~ gap-2","justify-around":""},[ee(i.$slots,"input",{item:u}),(t(!0),v(U,null,A(e(w),$=>(t(),v(U,{key:$},[u.type!==null&&$==="key"?(t(),C(R,{key:0,modelValue:u[$],"onUpdate:modelValue":_=>u[$]=_,placeholder:$,"flex-1":"","font-mono":"",n:"sm primary",disabled:i.disabled,class:E(i.disabled?"op50":"")},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","class"])):$==="value"?(t(),v(U,{key:1},[u.type==="file"?(t(),C(R,{key:0,type:"file",disabled:i.disabled,class:E(i.disabled?"op75":""),onChange:_=>s(S,_)},null,8,["disabled","class","onChange"])):u.type==="boolean"?(t(),v("div",Ut,[m(H,{modelValue:u.value,"onUpdate:modelValue":_=>u.value=_,placeholder:"Value",n:"green lg",disabled:i.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(t(),C(R,{key:2,modelValue:u.value,"onUpdate:modelValue":_=>u.value=_,type:u.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm primary",disabled:i.disabled,class:E(i.disabled?"op75":"")},null,8,["modelValue","onUpdate:modelValue","type","disabled","class"]))],64)):$==="type"?(t(),C(F,{key:2,modelValue:u.type,"onUpdate:modelValue":_=>u.type=_,n:"sm green",class:E(i.disabled?"op75":""),disabled:i.disabled},{default:k(()=>[(t(),v(U,null,A(c,_=>d("option",{key:_,value:_},j(_),9,Nt)),64))]),_:2},1032,["modelValue","onUpdate:modelValue","class","disabled"])):D("",!0)],64))),128)),ee(i.$slots,"input-actions",{},()=>[m(b,{n:"red",disabled:i.disabled,class:E(i.disabled?"op0!":""),onClick:$=>e(o).splice(S,1)},{default:k(()=>[m(J,{icon:"carbon:delete"})]),_:2},1032,["disabled","class","onClick"])])]))),128)),i.disabled?D("",!0):(t(),v("div",It,[ee(i.$slots,"actions",{params:e(o)},()=>[m(b,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:a[0]||(a[0]=u=>e(o).push({...e(g)}))},{default:k(()=>[z(" Add ")]),_:1}),Dt,e(o).length?(t(),C(b,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:a[1]||(a[1]=u=>o.value=[])},{default:k(()=>[z(" Remove All ")]),_:1})):D("",!0)])])),ee(i.$slots,"default")])}}}),jt={"h-full":"","w-full":"",flex:"~ col"},Et={flex:"~ col gap-2","flex-none":"",p4:"","n-navbar-glass":""},Ot={flex:"~ gap2 items-center"},Lt={relative:"","w-full":""},Pt={absolute:"","right-2":"","top-1.5":"",flex:"~ gap-1"},qt={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},Bt=d("div",{"flex-auto":""},null,-1),At=d("div",{"text-xs":"",op50:""}," Send from ",-1),Mt=d("option",{value:"app"}," App ",-1),Ft=d("option",{value:"devtools"}," DevTools ",-1),zt={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Ht={"text-right":"","font-mono":""},Wt={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},Gt={flex:"~ gap-4"},Jt={flex:"~ gap2","mb--2":"","items-center":"",op50:""},Kt=d("div",{"w-5":"","x-divider":""},null,-1),Qt=d("div",{"flex-none":""}," Default Inputs ",-1),Xt=d("div",{"x-divider":""},null,-1),Yt={key:2},Zt={key:3,border:"b base",relative:"","n-code-block":""},eo={flex:"~ wrap","w-full":""},to=["onClick"],oo=d("div",{border:"b base","flex-auto":""},null,-1),no={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},so=d("div",null,"Response",-1),lo={key:1,"text-xs":"",op50:""},ao=d("div",{"flex-auto":""},null,-1),ro=d("div",{op50:""}," Request finished in ",-1),io={key:0,"flex-auto":"","overflow-auto":""},uo={border:"~ base","h-full":"","w-full":"",rounded:""},po=["data"],co={key:2,"flex-auto":"","overflow-auto":"",p4:""},fo={border:"~ base",rounded:""},mo=["src"],vo={key:1,controls:"",rounded:""},ho=["src"],yo=ae({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(r,{emit:y}){const h=r,[o,w]=Qe(),g=Xe(),c=Ye(),s=pe({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),i=T(()=>s.contentType.includes("application/json")?"json":s.contentType.includes("text/html")?"html":s.contentType.includes("text/css")?"css":s.contentType.includes("text/javascript")?"javascript":s.contentType.includes("image")||s.contentType.includes("video")?"media":s.contentType.includes("text/xml")||s.contentType.includes("application/xml")?"xml":s.contentType.includes("application/pdf")?"pdf":"text"),a=T(()=>{if(i.value==="json")return JSON.stringify(s.data,null,2);if(i.value==="media"||i.value==="pdf"){const n=new Blob([s.data],{type:s.contentType});return URL.createObjectURL(n)}return s.data}),R=P(!1),H=P(!1),F=Ze(),J=T(()=>h.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),b=T(()=>J.value?.filter(n=>n.startsWith(":")||n.startsWith("**:"))||[]),u=P(h.route.method||"GET"),S=P({}),$=pe({query:[{key:"",value:"",type:"string"}],body:[{key:"",value:"",type:"string"}],headers:[{key:"Content-Type",value:"application/json",type:"string"}]}),_=P({}),{inputDefaults:V,sendFrom:q}=Ue("serverRoutes"),O=T(()=>c?.value?.app?.$fetch?q.value:"devtools"),B=["GET","POST","PUT","PATCH","DELETE","HEAD"],re=["PATCH","POST","PUT","DELETE"],te=T(()=>re.includes(u.value.toUpperCase())),L=P(b.value.length?"params":"query"),Y=["input","json"],x=P(Y[0]),K=T({get:()=>$[L.value],set:n=>{$[L.value]=n}}),me=T(()=>({...G(V.value.query),...G($.query)})),ve=T(()=>({...G(V.value.headers),...G($.headers)})),ie=T(()=>te.value?x.value==="json"?{...G(V.value.body),..._.value}:{...G(V.value.body),...G($.body)}:void 0),je=T(()=>{let n=window?.location.origin;return n.charAt(n.length-1)==="/"&&(n=n.slice(0,-1)),n}),oe=T(()=>{let n=new URLSearchParams(me.value).toString();n&&(n=`?${n}`);const p=(J.value?.map(N=>(N.startsWith(":")||N.startsWith("**:"))&&S.value[N]||N).join("")||"")+n;let f=g.value?.app.baseURL||"";return(f==="./"||f===".")&&(f=""),f.endsWith("/")&&(f=f.slice(0,-1)),f+p}),he=T(()=>je.value+oe.value);function G(n){const p=Object.fromEntries(n.filter(({key:f,value:N})=>f&&N!==void 0).map(({key:f,value:N})=>[f,N]));return Object.entries(p).length?p:void 0}async function ye(){H.value=!0,R.value=!0;const n=Date.now(),p=O.value==="app"?c.value.app.$fetch:$fetch;nt("server-routes:fetch",{method:u.value,sendFrom:O.value});try{s.data=await p(he.value,{method:u.value.toUpperCase(),headers:ve.value,query:me.value,body:ie.value,onResponse({response:f}){s.contentType=(f.headers.get("content-type")||"").toString().toLowerCase().trim(),s.statusCode=f.status,s.error=void 0},onResponseError(f){s.error=f.response._data,s.data=f.response._data}})}catch{}R.value=!1,s.fetchTime=Date.now()-n}const _e=T(()=>{const n=[],p=[],f=Object.entries(ve.value).filter(([I,M])=>I&&M&&!(I==="Content-Type"&&M==="application/json")).map(([I,M])=>`  '${I}': '${M}'`).join(`,
`);u.value.toUpperCase()!=="GET"&&p.push(`method: '${u.value.toUpperCase()}'`),f&&p.push(`headers: {
${f}
}`),ie.value&&p.push(`body: ${JSON.stringify(ie.value,null,2)}`);const N=p.length?`, {
${p.join(`,
`).split(`
`).map(I=>`  ${I}`).join(`
`)}
}`:"";return n.push({name:"useFetch",lang:"javascript",docs:ke.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${oe.value}'${N})`}),n.push({name:"$fetch",lang:"javascript",docs:ke.nuxt.$fetch,code:`await $fetch('${oe.value}'${N})`}),n}),Ee=T(()=>{const n=[];return b.value.length&&n.push({name:"Params",slug:"params",length:b.value.length}),n.push({name:"Query",slug:"query",length:$.query.length}),te.value&&n.push({name:"Body",slug:"body",length:$.body.length}),n.push({name:"Headers",slug:"headers",length:$.headers.length}),n.push({name:"Cookies",slug:"cookies"}),n.push({name:"Snippets",slug:"snippet"}),n}),Z=P(Oe());function Oe(){return document.cookie.split("; ").map(n=>{const[p,f]=n.split("=");return{key:p,value:f}})}const W=pe({key:"",value:""});function ue(n,p){if(!n)return;const f=Z.value.find(I=>I.key===n),N=wt(n);f!==void 0?p===void 0&&(Z.value=Z.value.filter(I=>I.key!==n)):(Z.value.push({key:n,value:p}),W.key="",W.value=""),N.value=p}et(()=>{x.value==="json"&&typeof _.value=="string"&&(_.value=JSON.parse(_.value))});const Le=tt();return(n,p)=>{const f=fe,N=Re,I=$e,M=ce,ge=De,Pe=ct,qe=Te,Be=st,de=Ve,Ae=ft,Me=mt,be=Se("tooltip");return t(),v("div",jt,[d("div",Et,[d("div",Ot,[n.route.method?(t(),C(f,{key:0,class:E(["n-badge-base n-sm",("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(e(u))]),"pointer-events-none":"","font-mono":"",tabindex:"-1"},{default:k(()=>[z(j(e(u).toUpperCase()),1)]),_:1},8,["class"])):(t(),C(N,{key:1,modelValue:e(u),"onUpdate:modelValue":p[0]||(p[0]=l=>X(u)?u.value=l:null),class:E(["n-badge-base n-sm",("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(e(u))])},{default:k(()=>[(t(),v(U,null,A(B,l=>d("option",{key:l,class:E(("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(l))},j(l.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),d("div",Lt,[m(I,{"model-value":e(oe),readonly:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"sm"},null,8,["model-value"]),d("div",Pt,[le(m(f,{title:"Copy URL",n:"xs blue",icon:"carbon:copy",border:!1,onClick:p[1]||(p[1]=l=>e(Le)(e(he)))},null,512),[[be,"Copy URL"]]),le(m(f,{title:"Open in Editor",icon:"carbon-launch",n:"xs blue",border:!1,onClick:p[2]||(p[2]=l=>e(F)(n.route.filepath))},null,512),[[be,"Open in Editor"]])])]),m(f,{n:"primary solid",onClick:ye},{default:k(()=>[m(M,{icon:"carbon:send"})]),_:1})])]),d("div",qt,[(t(!0),v(U,null,A(e(Ee),l=>(t(),C(f,{key:l.slug,class:E(e(L)===l.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:Q=>L.value=l.slug},{default:k(()=>[m(M,{icon:("ServerRouteTabIcons"in n?n.ServerRouteTabIcons:e(Ne))[l.slug]},null,8,["icon"]),z(" "+j(l.name)+" "+j(l?.length?`(${l.length})`:"")+" ",1),d("span",null,j(e(V)[l.slug]?.length?`(${e(V)[l.slug].length})`:""),1)]),_:2},1032,["class","onClick"]))),128)),Bt,At,m(N,{modelValue:e(O),"onUpdate:modelValue":p[3]||(p[3]=l=>X(O)?O.value=l:null),class:"n-xs",disabled:!e(c)?.app?.$fetch},{default:k(()=>[Mt,Ft]),_:1},8,["modelValue","disabled"])]),e(L)==="params"?(t(),v("div",zt,[(t(!0),v(U,null,A(e(b),l=>(t(),v(U,{key:l},[d("div",Ht,j(l),1),m(I,{modelValue:e(S)[l],"onUpdate:modelValue":Q=>e(S)[l]=Q,placeholder:l,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):D("",!0),e(L)==="cookies"?(t(),v("div",Wt,[(t(!0),v(U,null,A(e(Z),l=>(t(),v("div",{key:l.key,flex:"~ gap-4 items-center"},[m(I,{placeholder:"Key...","model-value":l.key,disabled:"","op-70":""},null,8,["model-value"]),m(I,{placeholder:"Value...","model-value":l.value,"flex-1":"",n:"primary",onInput:Q=>ue(l.key,Q.target?.value)},null,8,["model-value","onInput"]),m(f,{title:"Delete",n:"red",onClick:Q=>ue(l.key,void 0)},{default:k(()=>[m(M,{icon:"i-carbon-delete"})]),_:2},1032,["onClick"])]))),128)),d("div",Gt,[m(I,{modelValue:e(W).key,"onUpdate:modelValue":p[4]||(p[4]=l=>e(W).key=l),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),m(I,{modelValue:e(W).value,"onUpdate:modelValue":p[5]||(p[5]=l=>e(W).value=l),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),m(f,{title:"Add",n:"primary",onClick:p[6]||(p[6]=l=>ue(e(W).key,e(W).value))},{default:k(()=>[m(M,{icon:"i-carbon-save"})]),_:1})])])):D("",!0),m(e(o),null,{default:k(()=>[m(ge,{modelValue:e(K),"onUpdate:modelValue":p[9]||(p[9]=l=>X(K)?K.value=l:null),default:{type:"string"},"max-h-xs":"","of-auto":""},{default:k(()=>[e(V)[e(L)]?.length?(t(),v(U,{key:0},[d("div",Jt,[Kt,Qt,m(f,{icon:"i-carbon-edit",border:!1,onClick:p[7]||(p[7]=l=>y("open-default-input"))}),Xt]),m(ge,{modelValue:e(V)[e(L)],"onUpdate:modelValue":p[8]||(p[8]=l=>e(V)[e(L)]=l),disabled:"",p0:""},null,8,["modelValue"])],64)):D("",!0)]),_:1},8,["modelValue"])]),_:1}),e(L)==="snippet"?(t(),v("div",Yt,[e(_e).length?(t(),C(Pe,{key:0,"code-snippets":e(_e)},null,8,["code-snippets"])):D("",!0)])):e(K)?(t(),v("div",Zt,[e(L)==="body"?(t(),v(U,{key:0},[d("div",eo,[(t(),v(U,null,A(Y,l=>d("button",{key:l,px4:"",py2:"",border:"r base",hover:"bg-active",class:E({"border-b":l!==e(x)}),onClick:Q=>x.value=l},[d("div",{class:E({op30:l!==e(x)}),"font-mono":""},j(l),3)],10,to)),64)),oo]),e(x)==="input"?(t(),C(e(w),{key:0})):e(x)==="json"?(t(),C(e(vt),ot({key:1,modelValue:e(_),"onUpdate:modelValue":p[10]||(p[10]=l=>X(_)?_.value=l:null),class:[[n.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},n.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):D("",!0)],64)):(t(),C(e(w),{key:1}))])):D("",!0),e(H)?e(R)?(t(),C(Be,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:k(()=>[z(" Fetching... ")]),_:1})):(t(),v(U,{key:6},[d("div",no,[so,e(s).error?(t(),C(de,{key:0,n:"red"},{default:k(()=>[z(" Error ")]),_:1})):D("",!0),m(de,{n:e(s).error?"orange":"green",textContent:j(e(s).statusCode)},null,8,["n","textContent"]),e(s).contentType?(t(),v("code",lo,j(e(s).contentType),1)):D("",!0),e(s).contentType==="application/json"?(t(),C(Ae,{key:2,getter:()=>({input:e(a)})},null,8,["getter"])):D("",!0),ao,ro,m(de,{n:"green"},{default:k(()=>[z(j(e(s).fetchTime)+" ms ",1)]),_:1})]),e(i)==="pdf"?(t(),v("div",io,[d("div",uo,[d("object",{data:e(a),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,po)])])):e(i)!=="media"?(t(),C(Me,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(a),lang:e(i)},null,8,["code","lang"])):(t(),v("div",co,[d("div",fo,[e(s).contentType.includes("image")?(t(),v("img",{key:0,rounded:"",src:e(a)},null,8,mo)):(t(),v("video",vo,[d("source",{src:e(a),type:"video/mp4"},null,8,ho)]))])]))],64)):(t(),C(qe,{key:4},{default:k(()=>[m(f,{n:"primary",onClick:ye},{default:k(()=>[m(M,{icon:"carbon:send"}),z(" Send request ")]),_:1})]),_:1}))])}}}),_o={flex:"~ gap1","text-sm":""},go={key:0,op50:""},bo={op50:""},ko=d("span",{op75:""},"Select a route to start",-1),Co=d("div",{p4:"",border:"b base"},[d("span",{"text-lg":""},"Default Inputs"),d("br"),d("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),Lo=ae({__name:"server-routes",setup(r){const y=P(!1),h=lt(),o=we(),{selectedRoute:w,view:g,inputDefaults:c}=Ue("serverRoutes"),s=T(()=>{!o.value&&w.value&&(o.value=w.value.filepath);const b=h.value?.find(u=>u.filepath===o.value);return o.value!==w.value?.filepath&&b&&(w.value=b),b}),i=P(""),a=T(()=>new at(h.value||[],{keys:["method","route"],shouldSort:!0})),R=T(()=>h.value?i.value?a.value.search(i.value).map(u=>u.item):h.value:[]),H=T(()=>{const b=[],u=(S,$)=>{S.routes=S.routes||[],S.routes.push($)};return R.value.forEach(S=>{const $=S.filepath.split("/"),_=$.slice($.indexOf("server")+1);_.length>0&&_[_.length-1].includes(".")&&_.pop();let V=null;if(_.forEach(q=>{const O=V?V.routes?.find(B=>B.route===q):b.find(B=>B.route===q);if(O)V=O;else{const B={route:q,filepath:q.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};V?u(V,B):b.push(B),V=B}}),S.type==="runtime"){const q=b.find(O=>O.route==="runtime");if(q)u(q,S);else{const O={route:"runtime",filepath:"runtime",type:"collection",routes:[S]};b.push(O)}}else V?u(V,S):b.push(S)}),b});function F(){g.value=g.value==="tree"?"list":"tree"}function J(b){return b.charAt(0).toUpperCase()+b.slice(1)}return(b,u)=>{const S=fe,$=dt,_=Ie,V=yo,q=ut,O=Te,B=rt,re=De,te=ht,L=yt,Y=Se("tooltip");return t(),v(U,null,[m(B,{"storage-key":"tab-server-routes"},{left:k(()=>[m($,{search:e(i),"onUpdate:search":u[1]||(u[1]=x=>X(i)?i.value=x:null),pb2:""},{actions:k(()=>[le(m(S,{"text-lg":"",icon:e(g)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",border:!1,onClick:F},null,8,["icon"]),[[Y,"Toggle View"]]),le(m(S,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",border:!1,onClick:u[0]||(u[0]=x=>y.value=!e(y))},null,512),[[Y,"Default Inputs"]])]),default:k(()=>[d("div",_o,[e(i)?(t(),v("span",go,j(e(R).length)+" matched Â· ",1)):D("",!0),d("span",bo,j(e(h)?.length)+" routes in total",1)])]),_:1},8,["search"]),(t(!0),v(U,null,A(e(g)==="tree"?e(H):e(R),x=>(t(),C(_,{key:x.filepath,item:x},null,8,["item"]))),128))]),right:k(()=>[(t(),C(it,{max:10},[e(s)?(t(),C(V,{key:e(s).filepath,route:e(s),onOpenDefaultInput:u[2]||(u[2]=x=>y.value=!0)},null,8,["route"])):D("",!0)],1024)),e(s)?D("",!0):(t(),C(O,{key:0},{default:k(()=>[m(q,{px6:"",py2:""},{default:k(()=>[ko]),_:1})]),_:1}))]),_:1}),m(L,{modelValue:e(y),"onUpdate:modelValue":u[3]||(u[3]=x=>X(y)?y.value=x:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:u[4]||(u[4]=x=>y.value=!1)},{default:k(()=>[d("div",null,[Co,(t(!0),v(U,null,A(Object.keys(e(c)),x=>(t(),C(te,{key:x,text:`${J(x)} ${e(c)[x].length?`(${e(c)[x].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in b?b.ServerRouteTabIcons:e(Ne))[x]},{default:k(()=>[m(re,{modelValue:e(c)[x],"onUpdate:modelValue":K=>e(c)[x]=K,py0:"",default:{type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{Lo as default};
