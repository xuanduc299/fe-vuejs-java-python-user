import{_ as C}from"./AccountSidebar.vue.9d22ce90.js";import{a as x}from"./AuthService.028e45d7.js";import{c as b,m as h}from"./entry.98dfd619.js";import{F as M}from"./index.03c13174.js";import{B as y}from"./index.42b56407.js";import{d as j,r as V,a as B,a0 as R,D as r,U as a,R as n,u as t,P as F,a2 as d,o as S}from"./swiper-vue.a421f1cd.js";import{_ as U}from"./LockOutlined.450873cc.js";import{_ as q}from"./Password.0211d37f.js";import{_ as L}from"./FormItem.aab759e1.js";import"./nuxt-link.0ea93ab3.js";import"./Axios.d324b291.js";import"./zoom.cba4073c.js";import"./hasIn.fd17fd00.js";import"./isSymbol.28713955.js";import"./collapseMotion.f1f8d61b.js";import"./debounce.ff103b05.js";import"./styleChecker.29229325.js";import"./EyeOutlined.deffa0c0.js";import"./useFlexGapSupport.d9dc3cd0.js";const N={class:"max-w-[1200px] mx-auto grid px-20 grid-cols-4 mt-10"},T={class:"col-span-3 border border-solid border-gray-300 rounded-lg p-4"},$=a("h1",{class:"font-600 uppercase"},"Đổi mật khẩu",-1),O=a("span",{class:""},[d("Mật khẩu cũ "),a("span",{class:"text-red-500"},"(*)")],-1),A=a("span",{class:""},[d("Mật khẩu mới "),a("span",{class:"text-red-500"},"(*)")],-1),D=a("span",null,[d("Xác nhận mật khẩu mới"),a("span",{class:"text-red-500"},"(*)")],-1),le=j({__name:"doi-mat-khau",setup(E){const _=b(),o=V({oldPassword:"",newPassword:"",newPasswordConfirm:""}),m=B(),f=(s,e)=>e===""?Promise.reject("Mật khẩu không được để trống!"):e.length<6?Promise.reject("Mật khẩu phải có ít nhất 6 ký tự!"):Promise.resolve(),w=(s,e)=>e===""?Promise.reject("Mật khẩu không được để trống!"):e.length<6?Promise.reject("Mật khẩu phải có ít nhất 6 ký tự!"):(m.value.validateFields("newPasswordConfirm").then(l=>{console.log("after: ",l)}).catch(l=>{console.log("err: ",l)}),Promise.resolve()),P=(s,e)=>e===""?Promise.reject("Vui lòng không được để trống!"):e!==o.newPassword?Promise.reject("Mật khẩu không khớp!"):Promise.resolve(),g=()=>{m.value.validate().then(()=>{if(o.newPassword!==o.newPasswordConfirm){m.value.setFields([{pass:"pass",errors:["Passwords do not match"]}]),console.log("Passwords do not match");return}console.log("Values submitted",o,S(o)),x.changePassword(o).then(s=>{console.log("res: ",s),s.data.code==0?(h.success("Đổi mật khẩu thành công"),_.push("/tai-khoan/thong-tin")):code==1001&&h.error("Mật khẩu cũ của bạn không chính xác vui lòng nhập lại")}).catch(s=>{h.error("Mật khẩu cũ của bạn không chính xác vui lòng kiểm tra lại!")})}).catch(s=>{console.log("Validation error",s)})};return(s,e)=>{const l=C,c=U,p=q,u=L,k=y,v=M;return F(),R("div",N,[r(l),a("div",T,[$,r(v,{ref_key:"formRef",ref:m,model:t(o),rules:s.rules,"label-col":s.labelCol,"wrapper-col":s.wrapperCol},{default:n(()=>[r(u,{name:"oldPassword",rules:[{required:!0,validator:f}]},{default:n(()=>[O,r(p,{value:t(o).oldPassword,"onUpdate:value":e[0]||(e[0]=i=>t(o).oldPassword=i)},{prefix:n(()=>[r(c,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1},8,["rules"]),r(u,{name:"newPassword",rules:[{required:!0,validator:w},{min:6,message:"Mật khẩu cần phải tối thiểu 6 ký tự!"}]},{default:n(()=>[A,r(p,{value:t(o).newPassword,"onUpdate:value":e[1]||(e[1]=i=>t(o).newPassword=i),onChange:e[2]||(e[2]=i=>t(o).newPassword=t(o).newPassword.toLowerCase())},{prefix:n(()=>[r(c,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1},8,["rules"]),r(u,{name:"newPasswordConfirm",rules:[{required:!0,validator:P},{min:6,message:"Mật khẩu cần phải tối thiểu 6 ký tự!"}]},{default:n(()=>[D,r(p,{value:t(o).newPasswordConfirm,"onUpdate:value":e[3]||(e[3]=i=>t(o).newPasswordConfirm=i),onChange:e[4]||(e[4]=i=>t(o).newPasswordConfirm=t(o).newPasswordConfirm.toLowerCase())},{prefix:n(()=>[r(c,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1},8,["rules"]),r(u,null,{default:n(()=>[r(k,{type:"primary",onClick:g},{default:n(()=>[d("Đổi mật khẩu")]),_:1})]),_:1})]),_:1},8,["model","rules","label-col","wrapper-col"])])])}}});export{le as default};
