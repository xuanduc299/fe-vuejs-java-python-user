import{_ as R}from"./ProductFilterSidebar.vue.5c0b9264.js";import{a as I,n as A}from"./entry.98dfd619.js";import{P as H}from"./ProductService.87d523f1.js";import{B as J,_ as K}from"./index.7b78a5c4.js";import{S as Q}from"./index.7a7f2286.js";import{_ as W,M as X}from"./index.6d00dcf5.js";import{B as Y}from"./index.42b56407.js";import"./index.ea786c70.js";import{D as Z,a as oo}from"./dropdown.3b7ba1b5.js";import{d as to,i as no,a as M,r as C,J as ao,a7 as so,a0 as _,D as t,R as a,U as r,u as s,a9 as ro,P as l,a2 as p,a1 as d,F as B,aa as eo,ab as v,Q as co}from"./swiper-vue.a421f1cd.js";import{_ as lo}from"./index.833c360b.js";import{_ as _o}from"./index.56ca7c7d.js";import{_ as po}from"./UserOutlined.a0670c65.js";import{_ as uo}from"./index.7096b7e9.js";import{_ as io}from"./index.bde236d0.js";import{_ as fo}from"./index.b34af542.js";import"./index.03c13174.js";import"./FormItem.aab759e1.js";import"./zoom.cba4073c.js";import"./hasIn.fd17fd00.js";import"./isSymbol.28713955.js";import"./Password.0211d37f.js";import"./styleChecker.29229325.js";import"./EyeOutlined.deffa0c0.js";import"./collapseMotion.f1f8d61b.js";import"./useFlexGapSupport.d9dc3cd0.js";import"./debounce.ff103b05.js";import"./index.3fdac0c6.js";import"./SearchOutlined.4ca08eb4.js";import"./index.f15daada.js";import"./ResizeObserver.es.0f9f8adb.js";import"./index.4c10a40d.js";import"./index.a68a0920.js";import"./KeyCode.6e31e5e1.js";import"./FetchInstance.12311bd0.js";import"./LeftOutlined.b7f52e0f.js";import"./pickAttrs.aaf4be5e.js";import"./isMobile.358fd6c2.js";import"./useMergedState.8fbbbf27.js";import"./useRefs.ffce2853.js";const ho={class:""},go={class:"flex gap-[50px] mt-[20px] w-full justify-start px-3 md:px-[50px]"},xo={class:"w-full"},yo=r("span",{class:"text-xl"},"Sắp xếp:",-1),bo={key:0,class:"flex flex-wrap gap-[20px]"},ko={class:"relative"},mo=["src"],Co={key:0,class:"absolute top-2 left-2"},vo=r("div",{class:"font-[600] bordered p-1 w-fit rounded-[4px] mx-auto text-[12px] bg-red-500 text-white"}," Đã bán hết ",-1),So=[vo],wo={key:1,class:"absolute top-[10px] right-[10px]"},Do={class:"bg-red-200 text-red-500 p-1"},Mo={class:"m-0 text-base"},Bo={class:"product_price flex items-center gap-[10px]"},qo={class:"font-bold text-red-500"},zo={key:1,class:"font-bold text-red-500"},Go={class:"flex justify-center mt-[15px]"},bt=to({__name:"tim-kiem",setup(Fo){const f=I(),b=no("formatVnCurrency",n=>0),h=M([]),u=C({current:1,pageSize:12,total:0}),c=C({hienThiWeb:!0}),e=C({title:"Mới nhất",by:"id,desc"}),q=n=>{switch(console.log("sort by: ",n),n.key){case"latest":e.title="Mới nhất",e.by="id,desc";break;case"sale":e.title="Bán chạy nhất",e.by="daBan,desc";break;case"priceDown":e.title="Giá giảm dần",e.by="giaMoi,desc";break;case"priceUp":e.title="Giá tăng dần",e.by="giaMoi,asc";break}g()},z=n=>{c.thuongHieu=n.brand,c.dmGiay=n.category,c.mau=n.color,c.sizeId=n.sizeId,c.tieuDe=n.name||void 0,c.soSaoDanhGia=n.soSaoDanhGia,(n.priceStart>0||n.priceEnd>0)&&(c.khoangGia=n.priceRange),console.log("filter product",c),g()},i=M(!1),g=()=>{i.value||(i.value=!0,h.value=[],H.locSp(c,u.current-1,u.pageSize,e.by).then(n=>{console.log("product filter data",n),h.value=n.content,u.total=n.totalElements}).catch(()=>A.error({message:"Lọc thất bại!"})).finally(()=>i.value=!1))};return ao(()=>{c.tieuDe=String(f.query.q)||void 0,f.query.sort&&(e.by=f.query.sort?String(f.query.sort):"id,desc"),g()}),(n,S)=>{const k=so("router-link"),w=K,G=J,F=R,x=po,y=W,$=X,V=Z,j=Y,N=oo,m=lo,P=uo,U=io,T=fo,E=Q,L=_o;return l(),_("div",ho,[t(G,{class:"bg-gray-50 px-3 md:px-[50px] py-2"},{default:a(()=>[t(w,null,{default:a(()=>[t(k,{to:"/"},{default:a(()=>[p("Trang chủ")]),_:1})]),_:1}),t(w,null,{default:a(()=>[p("Tìm kiếm")]),_:1})]),_:1}),r("div",go,[t(F,{"search-q":String(s(f).query.q)||void 0,onFilter:z},null,8,["search-q"]),r("div",xo,[t(m,{class:"items-center justify-end w-full mb-[20px]"},{default:a(()=>[yo,t(N,null,{overlay:a(()=>[t($,{onClick:q},{default:a(()=>[t(y,{key:"latest"},{default:a(()=>[t(x),p(" Mới nhất ")]),_:1}),t(y,{key:"sale"},{default:a(()=>[t(x),p(" Bán chạy nhất ")]),_:1}),t(y,{key:"priceDown"},{default:a(()=>[t(x),p(" Giá giảm dần ")]),_:1}),t(y,{key:"priceUp"},{default:a(()=>[t(x),p(" Giá tăng dần ")]),_:1})]),_:1})]),default:a(()=>[t(j,null,{default:a(()=>[p(d(s(e).title)+" ",1),t(V)]),_:1})]),_:1})]),_:1}),t(E,{class:ro({"flex justify-center":s(i)}),spinning:s(i)},{default:a(()=>[s(h).length>0?(l(),_("div",bo,[(l(!0),_(B,null,eo(s(h),(o,O)=>(l(),_("div",{style:{width:"23%",border:"none","box-shadow":"none"},key:O},[r("div",ko,[t(k,{class:"block h-[300px]",to:`/san-pham/${o==null?void 0:o.slug}/${o==null?void 0:o.id}`},{default:a(()=>{var D;return[r("img",{src:(D=o==null?void 0:o.anhChinh)==null?void 0:D.url,class:"shadow-sm h-full rounded-[5px] hover:scale-[1.05] duration-200 easy-in-out"},null,8,mo)]}),_:2},1032,["to"]),(o==null?void 0:o.tongSp)==0?(l(),_("div",Co,So)):v("",!0),o!=null&&o.giaCu&&(o==null?void 0:o.giaCu)>0&&(o==null?void 0:o.giaCu)>(o==null?void 0:o.giaMoi)?(l(),_("div",wo,[r("span",Do,"-"+d(Math.floor(Number(((o==null?void 0:o.giaCu)-(o==null?void 0:o.giaMoi))/(o==null?void 0:o.giaCu)*100)))+"%",1)])):v("",!0)]),t(m,{direction:"vertical",size:10,class:"mt-[10px]"},{default:a(()=>[r("h3",Mo,[t(k,{class:"font-[600]",to:`/san-pham/${o==null?void 0:o.slug}/${o==null?void 0:o.id}`},{default:a(()=>[p(d(o.tieuDe.slice(0,50)),1)]),_:2},1032,["to"])]),r("div",Bo,[o!=null&&o.giaCu&&(o==null?void 0:o.giaCu)>0?(l(),_(B,{key:0},[r("del",null,d(s(b)(o==null?void 0:o.giaCu)),1),r("span",qo,d(s(b)(o==null?void 0:o.giaMoi)),1)],64)):(l(),_("span",zo,d(s(b)(o==null?void 0:o.giaMoi)),1))]),t(m,null,{default:a(()=>[t(P,{class:"text-[14px]",value:(o==null?void 0:o.tbDanhGia)||0,"allow-half":"",disabled:""},null,8,["value"]),t(U,{type:"vertical",class:"bg-gray-500"}),r("span",null,d((o==null?void 0:o.daBan)||0)+" Đã bán",1)]),_:2},1024)]),_:2},1024)]))),128))])):!s(i)&&s(h).length==0?(l(),co(T,{key:1,status:"404","sub-title":"Không tìm thấy sản phẩm nào!"})):v("",!0)]),_:1},8,["class","spinning"]),r("div",Go,[t(L,{current:s(u).current,"onUpdate:current":S[0]||(S[0]=o=>s(u).current=o),onChange:g,pageSize:s(u).pageSize,total:s(u).total},null,8,["current","pageSize","total"])])])])])}}});export{bt as default};
