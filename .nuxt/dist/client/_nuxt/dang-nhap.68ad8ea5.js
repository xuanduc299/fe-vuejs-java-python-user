import{_ as M}from"./nuxt-link.0ea93ab3.js";import{u as S,n as i}from"./entry.98dfd619.js";import{a as _}from"./AuthService.028e45d7.js";import{F as $}from"./index.03c13174.js";import{M as j}from"./index.3b7226f8.js";import{_ as B}from"./UserOutlined.a0670c65.js";import"./index.3fdac0c6.js";import{I,_ as P}from"./Password.0211d37f.js";import{_ as R}from"./LockOutlined.450873cc.js";import{B as z}from"./index.42b56407.js";import{d as F,r as g,a as f,a0 as N,U as n,D as o,R as s,a2 as h,P as O}from"./swiper-vue.a421f1cd.js";import{_ as q}from"./FormItem.aab759e1.js";import"./Axios.d324b291.js";import"./zoom.cba4073c.js";import"./hasIn.fd17fd00.js";import"./isSymbol.28713955.js";import"./collapseMotion.f1f8d61b.js";import"./debounce.ff103b05.js";import"./styleChecker.29229325.js";import"./index.deae0fdd.js";import"./KeyCode.6e31e5e1.js";import"./pickAttrs.aaf4be5e.js";import"./fade.dee7eb07.js";import"./EyeOutlined.deffa0c0.js";import"./SearchOutlined.4ca08eb4.js";import"./index.f15daada.js";import"./ResizeObserver.es.0f9f8adb.js";import"./useFlexGapSupport.d9dc3cd0.js";const A={class:"min-h-screen flex flex-col items-center justify-center bg-cover",style:{"background-image":"url('https://goodfit.vn/wp-content/uploads/2021/01/gang-tay-the-thao-chong-nang-6.jpg')"}},Z={class:"flex flex-col bg-white opacity-90 shadow-md px-4 sm:px-6 md:px-8 lg:px-10 py-8 rounded-md w-full max-w-md"},Q={class:"mt-3"},D={class:"flex flex-col"},G={class:"flex flex-col mb-3"},H={class:"flex w-full"},K=n("span",{class:"justify-center uppercase"},"Đăng nhập",-1),L={class:"mt-10"},J={class:"flex flex-col"},Ce=F({__name:"dang-nhap",setup(W){S();const t=g({username:"",password:""}),r=g({email:""}),m=f(null),u=f(!1),x=()=>{u.value=!0,r.email="",v()},v=()=>{m.value.resetFields()},k=a=>{console.log(a),console.log(r.email),_.forgotPassword(r.email).then(e=>{console.log("user: ",e.data),i.success({message:"Vui lòng kiểm tra email để lấy lại mật khẩu"}),setTimeout(()=>{u.value=!1},1e3)},e=>{e.response.data.code==9999&&i.warning({message:"Email không tồn tại trong hệ thống !"})}).catch(e=>{i.warning({message:"Không tìm thấy email. Vui lòng kiểm tra lại!"}),console.log(e)})},w=(a,e)=>e&&!/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/g.test(e)?Promise.reject("Email không hợp lệ!"):Promise.resolve(),b=()=>{m.value.validate().then(()=>{if(t.username.trim()===""||t.password.trim()===""){i.error({message:"Vui lòng nhập tài khoản và mật khẩu."});return}console.log(t),_.login(t).then(a=>{console.log("user: ",a.data),console.log("login success: "),i.success({message:"Đăng nhập thành công!"}),window.localStorage.setItem("loggedUser",`${a.data.accessToken}`),window.localStorage.setItem("auth",`${a.data.roles[0]}`),window.localStorage.setItem("username",`${a.data.userName}`),setTimeout(()=>window.location.href=window.location.origin,200)},a=>{console.log(a),i.error({message:"Tài khoản hoặc mật khẩu không chính xác"})})})};return(a,e)=>{const y=B,d=I,c=q,T=R,V=P,C=z,p=$,E=M,U=j;return O(),N("div",A,[n("div",Z,[n("div",Q,[o(p,{ref_key:"formRef",ref:m,class:"w-full sm:max-w-[300px] lg:max-w-[500px] relative",model:t,name:"basic",layout:"vertical"},{default:s(()=>[n("div",D,[o(c,{label:"Tài khoản",name:"username",rules:[{required:!0,message:"Vui lòng không bỏ trống!"}]},{default:s(()=>[o(d,{class:"h-10 text-base",value:t.username,"onUpdate:value":e[0]||(e[0]=l=>t.username=l),onChange:e[1]||(e[1]=l=>t.username=t.username.replace(/^\s+/,"")),maxlength:255,placeholder:"Tài khoản ..."},{prefix:s(()=>[o(y,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1})]),n("div",G,[o(c,{style:{"margin-bottom":"0"},label:"Mật khẩu",name:"password",rules:[{required:!0,message:"Mật khẩu không được để trống!"}]},{default:s(()=>[o(V,{class:"h-10 text-base",value:t.password,"onUpdate:value":e[2]||(e[2]=l=>t.password=l),onChange:e[3]||(e[3]=l=>t.password=t.password.replace(/^\s+/,"")),placeholder:"Mật khẩu ..."},{prefix:s(()=>[o(T,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1})]),n("div",H,[o(C,{"html-type":"button",onClick:b,class:"flex z-auto items-center justify-center focus:outline-none h-10 text-white text-sm sm:text-base bg-blue-600 hover:bg-blue-700 hover:text-white rounded py-2 w-full transition duration-150 ease-in"},{default:s(()=>[K]),_:1})])]),_:1},8,["model"]),n("div",L,[h(" Chưa có tài khoản? "),o(E,{class:"text-blue-600 hover:text-blue-700",href:"/dang-ky"},{default:s(()=>[h("Đăng ký")]),_:1})]),n("div",{class:"mt-5"},[n("a",{class:"text-blue-600 hover:text-blue-700",onClick:x},"Quên mật khẩu ?")]),o(U,{visible:u.value,"onUpdate:visible":e[5]||(e[5]=l=>u.value=l),title:"Quên mật khẩu",okText:"Gửi",cancelText:"Huỷ",onOk:k},{default:s(()=>[o(p,{ref_key:"formRef",ref:m,style:{margin:"0 auto"},model:r,name:"basic",layout:"vertical"},{default:s(()=>[n("div",J,[o(c,{label:"Email",name:"email",rules:[{validator:w},{required:!0,message:"Email không được để trống!"}]},{default:s(()=>[o(d,{value:r.email,"onUpdate:value":e[4]||(e[4]=l=>r.email=l),placeholder:"Email ..."},null,8,["value"])]),_:1},8,["rules"])])]),_:1},8,["model"])]),_:1},8,["visible"])])])])}}});export{Ce as default};
