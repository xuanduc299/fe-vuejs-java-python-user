import{d as S,u as E,n as u}from"./entry.98dfd619.js";import{a as _,c as k,d as N,i as j,J as M,r as U,a0 as P,U as l,D as a,R as m,u as o,P as R}from"./swiper-vue.a421f1cd.js";import{a as T}from"./AuthService.028e45d7.js";import{F as $}from"./index.03c13174.js";import"./index.3fdac0c6.js";import{I as z,_ as B}from"./Password.0211d37f.js";import{_ as V}from"./FormItem.aab759e1.js";import{B as q}from"./index.42b56407.js";import"./Axios.d324b291.js";import"./zoom.cba4073c.js";import"./hasIn.fd17fd00.js";import"./isSymbol.28713955.js";import"./collapseMotion.f1f8d61b.js";import"./debounce.ff103b05.js";import"./styleChecker.29229325.js";import"./EyeOutlined.deffa0c0.js";import"./SearchOutlined.4ca08eb4.js";import"./index.f15daada.js";import"./ResizeObserver.es.0f9f8adb.js";import"./useFlexGapSupport.d9dc3cd0.js";const A=S("counter",()=>{const d=_(0),f=_("Eduardo"),v=k(()=>d.value*2);function p(){d.value++}return{count:d,name:f,doubleCount:v,increment:p}}),Z={class:"flex flex-col py-[50px] items-center justify-center bg-cover",style:{"background-image":"url('https://goodfit.vn/wp-content/uploads/2021/01/gang-tay-the-thao-chong-nang-6.jpg')"}},H={class:"flex flex-col bg-white opacity-90 shadow-md px-4 sm:px-6 md:px-8 lg:px-10 py-8 rounded-md w-full max-w-md"},L=l("h1",{class:"text-center text-2xl font-bold uppercase"}," Đăng ký tài khoản mới ",-1),D={class:"mt-3"},F={class:"flex flex-col"},I={class:"flex flex-col"},J={class:"flex flex-col"},O={class:"flex flex-col"},G={class:"flex flex-col mb-3"},K={class:"flex w-full"},Q=l("span",{class:"justify-center uppercase"},"Đăng ký tài khoản mới",-1),ve=N({__name:"dang-ky",setup(d){const f=j("removeSpecialChars",s=>s),v=E(),p=A(),b=()=>p.increment();k(()=>p.doubleCount),M(()=>{console.log("signup page mounted: ",p)}),onsubmit=s=>{s.preventDefault(),console.log("submit"),b(),console.log("signup page mounted: ",p)};const t=U({role:"ROLE_USER",userName:"",password:"",email:"",phone:"",name:""}),x=_(null),w=()=>{x.value.validate().then(()=>{if(t.userName.trim()===""||t.password.trim()===""){u.error({message:"Vui lòng nhập tài khoản và mật khẩu."});return}console.log("formState: ",t),T.register(t).then(s=>{console.log("res: ",s),s.status==200?(u.success({message:"Đăng ký thành công"}),v.push("/dang-nhap")):u.error({message:"Đăng ký thất bại"})}).catch(s=>{var e,i,r,c,g,h;((i=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:i.code)==21?u.error({message:"Tài khoản này đã được đăng ký."}):((c=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:c.code)==22?u.error({message:"Email này đã được đăng ký."}):((h=(g=s==null?void 0:s.response)==null?void 0:g.data)==null?void 0:h.code)==23?u.error({message:"Số điện thoại này đã được đăng ký."}):u.error({message:"Đăng ký thất bại!"})})})},y=(s,e)=>e&&!/((09|03|07|08|05)+([0-9]{8})\b)/g.test(e)?Promise.reject("Số điện thoại không đúng!"):Promise.resolve(),C=(s,e)=>e&&!/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/g.test(e)?Promise.reject("Email không hợp lệ!"):Promise.resolve();return(s,e)=>{const i=z,r=V,c=B,g=q,h=$;return R(),P("div",Z,[l("div",H,[L,l("div",D,[a(h,{ref_key:"formRef",ref:x,class:"w-full sm:max-w-[300px] lg:max-w-[500px] relative",style:{margin:"0 auto"},model:o(t),name:"basic",layout:"vertical"},{default:m(()=>[l("div",F,[a(r,{label:"Tài khoản",name:"userName",rules:[{required:!0,message:"Tài khoản không được để trống!"}]},{default:m(()=>[a(i,{class:"h-10 text-base",onChange:e[0]||(e[0]=n=>o(t).userName=o(t).userName.replace(/[^a-zA-Z0-9@]/g,"").toLowerCase()),value:o(t).userName,"onUpdate:value":e[1]||(e[1]=n=>o(t).userName=n),valueModifiers:{trim:!0},placeholder:"Tài khoản ..."},null,8,["value"])]),_:1})]),l("div",I,[a(r,{label:"Email",name:"email",rules:[{validator:C}]},{default:m(()=>[a(i,{class:"h-10 text-base",value:o(t).email,"onUpdate:value":e[2]||(e[2]=n=>o(t).email=n),valueModifiers:{trim:!0},onChange:e[3]||(e[3]=n=>o(t).email=o(t).email.replace(/^\s+/,"")),placeholder:"Email ..."},null,8,["value"])]),_:1},8,["rules"])]),l("div",J,[a(r,{label:"Số điện thoại",name:"phone",rules:[{validator:y},{required:!0,message:"Số điện thoại không được để trống!"}]},{default:m(()=>[a(i,{class:"h-10 text-base",value:o(t).phone,"onUpdate:value":e[4]||(e[4]=n=>o(t).phone=n),maxlength:10,onChange:e[5]||(e[5]=n=>o(t).phone=o(t).phone.replace(/[^0-9@]/g,"")),placeholder:"Số điện thoại ..."},null,8,["value"])]),_:1},8,["rules"])]),l("div",O,[a(r,{label:"Họ và tên",name:"name",rules:[{required:!0,message:"Họ và tên không được để trống!"}]},{default:m(()=>[a(i,{class:"h-10 text-base",value:o(t).name,"onUpdate:value":e[6]||(e[6]=n=>o(t).name=n),onChange:e[7]||(e[7]=n=>o(t).name=o(f)(o(t).name).replace(/^\s+/,"")),placeholder:"Họ và tên ..."},null,8,["value"])]),_:1})]),l("div",G,[a(r,{style:{"margin-bottom":"0"},label:"Mật khẩu",name:"password",rules:[{required:!0,message:"Mật khẩu không được để trống!"},{min:6,message:"Mật khẩu cần phải tối thiểu 6 ký tự!"}]},{default:m(()=>[a(c,{class:"h-10 text-base",value:o(t).password,"onUpdate:value":e[8]||(e[8]=n=>o(t).password=n),onChange:e[9]||(e[9]=n=>o(t).password=o(t).password.toLowerCase()),placeholder:"Mật khẩu ..."},null,8,["value"])]),_:1})]),l("div",K,[a(g,{"html-type":"button",onClick:w,class:"flex z-auto items-center justify-center focus:outline-none h-10 hover:text-white text-white text-sm sm:text-base bg-blue-600 hover:bg-blue-700 rounded py-2 w-full transition duration-150 ease-in"},{default:m(()=>[Q]),_:1})])]),_:1},8,["model"])])])])}}});export{ve as default};
