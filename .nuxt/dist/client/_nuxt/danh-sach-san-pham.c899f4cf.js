import{_ as T}from"./ProductFilterSidebar.vue.5c0b9264.js";import{a as I,n as A}from"./entry.98dfd619.js";import{P as H}from"./ProductService.87d523f1.js";import{B as J,_ as K}from"./index.7b78a5c4.js";import{S as Q}from"./index.7a7f2286.js";import{_ as W}from"./index.56ca7c7d.js";import{d as X,i as Y,a as M,r as C,J as Z,a7 as oo,a0 as _,D as n,R as a,U as r,a9 as no,u as s,P as l,a2 as p,a1 as d,F as B,aa as to,ab as v,Q as ao}from"./swiper-vue.a421f1cd.js";import{_ as so,M as ro}from"./index.6d00dcf5.js";import{D as eo,a as co}from"./dropdown.3b7ba1b5.js";import{B as lo}from"./index.42b56407.js";import"./index.ea786c70.js";import{_ as _o}from"./index.7096b7e9.js";import{_ as po}from"./index.bde236d0.js";import{_ as uo}from"./index.833c360b.js";import{_ as io}from"./UserOutlined.a0670c65.js";import{_ as fo}from"./index.b34af542.js";import"./index.03c13174.js";import"./FormItem.aab759e1.js";import"./zoom.cba4073c.js";import"./hasIn.fd17fd00.js";import"./isSymbol.28713955.js";import"./Password.0211d37f.js";import"./styleChecker.29229325.js";import"./EyeOutlined.deffa0c0.js";import"./collapseMotion.f1f8d61b.js";import"./useFlexGapSupport.d9dc3cd0.js";import"./debounce.ff103b05.js";import"./index.3fdac0c6.js";import"./SearchOutlined.4ca08eb4.js";import"./index.f15daada.js";import"./ResizeObserver.es.0f9f8adb.js";import"./index.4c10a40d.js";import"./index.a68a0920.js";import"./KeyCode.6e31e5e1.js";import"./FetchInstance.12311bd0.js";import"./LeftOutlined.b7f52e0f.js";import"./pickAttrs.aaf4be5e.js";import"./isMobile.358fd6c2.js";import"./useMergedState.8fbbbf27.js";import"./useRefs.ffce2853.js";const ho={class:"mb-[30px]"},go={class:"flex gap-[50px] mt-[20px] w-full justify-start px-3 md:px-[50px]"},xo={class:"w-full"},bo=r("span",{class:"text-xl"},"Sắp xếp:",-1),yo={key:0,class:"flex flex-wrap gap-[20px]"},ko={class:"relative"},mo=["src"],Co={key:0,class:"absolute top-2 left-2"},vo=r("div",{class:"font-[600] bordered p-1 w-fit rounded-[4px] mx-auto text-[12px] bg-red-500 text-white"}," Đã bán hết ",-1),So=[vo],wo={key:1,class:"absolute top-[10px] right-[10px]"},Do={class:"bg-red-200 text-red-500 p-1"},Mo={class:"m-0 text-base"},Bo={class:"product_price flex items-center gap-[10px]"},zo={class:"font-bold text-red-500"},Go={key:1,class:"font-bold text-red-500"},Fo={class:"flex justify-center mt-[15px]"},kn=X({__name:"danh-sach-san-pham",setup($o){const b=I(),y=Y("formatVnCurrency",t=>0),f=M([]),u=C({current:1,pageSize:12,total:0}),c=C({hienThiWeb:!0}),e=C({title:"Mới nhất",by:"id,desc"}),z=t=>{switch(console.log("sort by: ",t),t.key){case"latest":e.title="Mới nhất",e.by="id,desc";break;case"sale":e.title="Bán chạy nhất",e.by="daBan,desc";break;case"priceDown":e.title="Giá giảm dần",e.by="giaMoi,desc";break;case"priceUp":e.title="Giá tăng dần",e.by="giaMoi,asc";break}h()},G=t=>{c.thuongHieu=t.brand,c.dmGiay=t.category,c.mau=t.color,c.sizeId=t.sizeId,c.tieuDe=t.name||void 0,c.soSaoDanhGia=t.soSaoDanhGia,(t.priceStart>0||t.priceEnd>0)&&(c.khoangGia=t.priceRange),console.log("filter product",c),h()},i=M(!1),h=()=>{i.value||(i.value=!0,f.value=[],H.locSp(c,u.current-1,u.pageSize,e.by).then(t=>{console.log("product filter data",t),f.value=t.content,u.total=t.totalElements}).catch(()=>A.error({message:"Lọc thất bại!"})).finally(()=>i.value=!1))};return Z(()=>{b.query.sort&&(e.by=b.query.sort?String(b.query.sort):"id,desc"),h()}),(t,S)=>{const k=oo("router-link"),w=K,F=J,$=T,g=io,x=so,V=ro,j=eo,N=lo,P=co,m=uo,U=_o,q=po,E=fo,L=Q,O=W;return l(),_("div",ho,[n(F,{class:"bg-gray-50 px-3 md:px-[50px] py-2"},{default:a(()=>[n(w,null,{default:a(()=>[n(k,{to:"/"},{default:a(()=>[p("Trang chủ")]),_:1})]),_:1}),n(w,null,{default:a(()=>[p("Danh sách sản phẩm")]),_:1})]),_:1}),r("div",go,[n($,{onFilter:G}),r("div",xo,[n(m,{class:"items-center justify-end w-full mb-[20px]"},{default:a(()=>[bo,n(P,null,{overlay:a(()=>[n(V,{onClick:z},{default:a(()=>[n(x,{key:"latest"},{default:a(()=>[n(g),p(" Mới nhất ")]),_:1}),n(x,{key:"sale"},{default:a(()=>[n(g),p(" Bán chạy nhất ")]),_:1}),n(x,{key:"priceDown"},{default:a(()=>[n(g),p(" Giá giảm dần ")]),_:1}),n(x,{key:"priceUp"},{default:a(()=>[n(g),p(" Giá tăng dần ")]),_:1})]),_:1})]),default:a(()=>[n(N,null,{default:a(()=>[p(d(s(e).title)+" ",1),n(j)]),_:1})]),_:1})]),_:1}),n(L,{class:no({"flex justify-center":s(i)}),spinning:s(i)},{default:a(()=>[s(f).length>0?(l(),_("div",yo,[(l(!0),_(B,null,to(s(f),(o,R)=>(l(),_("div",{style:{width:"23%",border:"none","box-shadow":"none"},key:R},[r("div",ko,[n(k,{class:"block h-[300px]",to:`/san-pham/${o==null?void 0:o.slug}/${o==null?void 0:o.id}`},{default:a(()=>{var D;return[r("img",{src:(D=o==null?void 0:o.anhChinh)==null?void 0:D.url,class:"shadow-sm h-full rounded-[5px] hover:scale-[1.05] duration-200 easy-in-out"},null,8,mo)]}),_:2},1032,["to"]),(o==null?void 0:o.tongSp)==0?(l(),_("div",Co,So)):v("",!0),o!=null&&o.giaCu&&(o==null?void 0:o.giaCu)>0&&(o==null?void 0:o.giaCu)>(o==null?void 0:o.giaMoi)?(l(),_("div",wo,[r("span",Do,"-"+d(Math.floor(Number(((o==null?void 0:o.giaCu)-(o==null?void 0:o.giaMoi))/(o==null?void 0:o.giaCu)*100)))+"%",1)])):v("",!0)]),n(m,{direction:"vertical",size:10,class:"mt-[10px]"},{default:a(()=>[r("h3",Mo,[n(k,{class:"font-[600]",to:`/san-pham/${o==null?void 0:o.slug}/${o==null?void 0:o.id}`},{default:a(()=>[p(d(o.tieuDe.slice(0,50)),1)]),_:2},1032,["to"])]),r("div",Bo,[o!=null&&o.giaCu&&(o==null?void 0:o.giaCu)>0?(l(),_(B,{key:0},[r("del",null,d(s(y)(o==null?void 0:o.giaCu)),1),r("span",zo,d(s(y)(o==null?void 0:o.giaMoi)),1)],64)):(l(),_("span",Go,d(s(y)(o==null?void 0:o.giaMoi)),1))]),n(m,null,{default:a(()=>[n(U,{class:"text-[14px]",value:(o==null?void 0:o.tbDanhGia)||0,"allow-half":"",disabled:""},null,8,["value"]),n(q,{type:"vertical",class:"bg-gray-500"}),r("span",null,d((o==null?void 0:o.daBan)||0)+" Đã bán",1)]),_:2},1024)]),_:2},1024)]))),128))])):!s(i)&&s(f).length==0?(l(),ao(E,{key:1,status:"404","sub-title":"Không tìm thấy sản phẩm nào!"})):v("",!0)]),_:1},8,["class","spinning"]),r("div",Fo,[n(O,{current:s(u).current,"onUpdate:current":S[0]||(S[0]=o=>s(u).current=o),onChange:h,pageSize:s(u).pageSize,total:s(u).total},null,8,["current","pageSize","total"])])])])])}}});export{kn as default};
